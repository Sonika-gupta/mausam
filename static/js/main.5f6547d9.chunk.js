(this.webpackJsonpmausam=this.webpackJsonpmausam||[]).push([[0],{100:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(12),i=n.n(c),o=(n(88),n(13)),s=n.n(o),u=n(21),d=n(62),l=n(16),j=n(74),p=n(155),b=n(138),h=n(143),m=n(73),f=n.n(m),x=n(33),O=n(146),g=n(159),v=n(148),y=n(139),w=n(149),k=n(150),S=n(140),C=n(101),L=function(t,e){return(e?new Date(1e3*e):new Date).toLocaleTimeString("en-US",{timeZone:t,hour:"2-digit",minute:"2-digit"})},I=function(t,e){return new Date(1e3*e).toLocaleDateString("en-US",{timeZone:t,weekday:"short",month:"short",day:"numeric"})};function T(t){return{metric:parseInt(t-276.15),imperial:parseInt(9*(t-276.15)/5+32)}}var z=n(3);function N(t){var e=t.weather,n=t.size;return Object(z.jsx)("img",{style:{margin:"auto"},src:"http://openweathermap.org/img/w/".concat(e.icon,".png"),alt:e.description,caption:e.description,width:n,height:n})}function W(t){var e=t.weather,n=t.variant,r=void 0===n?"subtitle1":n;return Object(z.jsx)(C.a,{component:"div",align:"center",variant:r,style:{textTransform:"capitalize"},children:e.description})}function U(t){var e=t.dt,n=t.timezone,r=t.variant,a=void 0===r?"body1":r;return Object(z.jsx)(C.a,{variant:a,children:L(n,e)})}function A(t){var e=t.dt,n=t.timezone;return Object(z.jsx)(C.a,{variant:"caption",children:I(n,e)})}function D(t){var e=t.temperature,n=t.unit,r=t.variant,a=void 0===r?"h3":r,c=n?T(e)[n]:e;return Object(z.jsxs)(C.a,{align:"center",variant:a,children:[c,"\xb0"]})}function P(t){var e,n,r,a=t.forecast,c=t.unit;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(b.a,{children:Object(z.jsxs)(C.a,{variant:"h6",align:"center",children:[null===(e=a.city)||void 0===e?void 0:e.name,",",Object(z.jsx)(C.a,{variant:"body1",component:"span",style:{paddingLeft:"5px"},children:null===(n=a.city)||void 0===n||null===(r=n.country)||void 0===r?void 0:r.id})]})}),Object(z.jsxs)(y.a,{container:!0,style:{background:"transparent",border:"none",margin:"auto"},justify:"space-evenly",spacing:2,children:[Object(z.jsx)(y.a,{item:!0,children:Object(z.jsx)(D,{temperature:a.current[c],variant:"h2"})}),Object(z.jsx)(b.a,{children:Object(z.jsx)(W,{weather:a.current.weather[0]})})]})]})}var F=n(141),E=n(142),R=n(102),B={background:"transparent",border:"none",width:"100%",height:"72%",alignItems:"center",minWidth:"100px"};function G(t){var e=t.weather,n=t.unit,r=t.type;t.children;return"daily"===r?Object.assign(e,T(e.temp.day)):Object.assign(e,T(e.temp)),Object(z.jsxs)(R.a,{variant:"outlined",square:!0,style:B,children:[Object(z.jsx)(N,{weather:e.weather[0]}),Object(z.jsx)(D,{temperature:e[n],variant:"h5"}),Object(z.jsx)(W,{weather:e.weather[0],variant:"caption"})]})}var J=Object(S.a)({root:{display:"flex",flexWrap:"wrap",marginTop:"50px",overflow:"hidden"},gridList:{flexWrap:"nowrap",borderTop:"solid 1px white",borderBottom:"solid 1px white"},gridListTile:{background:"transparent",border:"none",textAlign:"center",padding:"5px",minWidth:"100px"}});function _(t){var e=t.forecast,n=t.unit,r=t.timezone,a=J();return Object(z.jsxs)("div",{className:a.root,children:[Object(z.jsx)(C.a,{variant:"overline",children:"Hourly Forecast"}),Object(z.jsx)(F.a,{cols:4,spacing:0,className:a.gridList,children:e.map((function(t,e){return Object(z.jsxs)(E.a,{cols:.5,className:a.gridListTile,children:[Object(z.jsx)(G,{weather:t,unit:n}),Object(z.jsxs)("div",{children:[Object(z.jsx)("hr",{style:{width:"100%",margin:"10px auto"}}),Object(z.jsx)(U,{timezone:r,dt:t.dt})]})]},e)}))})]})}var H=Object(S.a)({root:{marginTop:"50px",overflow:"hidden",width:"100%"},gridList:{flexWrap:"nowrap",borderTop:"solid 1px white",borderBottom:"solid 1px white",width:"100%"},gridListTile:{background:"transparent",border:"none",textAlign:"center",padding:"5px",minWidth:"100px"}});function Y(t){var e=t.forecast,n=t.unit,r=t.timezone,a=H();return Object(z.jsxs)("div",{className:a.root,children:[Object(z.jsx)(C.a,{variant:"overline",children:"Daily Forecast"}),Object(z.jsx)(F.a,{cols:4,spacing:0,className:a.gridList,children:e.map((function(t){return Object(z.jsxs)(E.a,{cols:.5,className:a.gridListTile,children:[Object(z.jsx)(G,{weather:t,unit:n,type:"daily"}),Object(z.jsxs)("div",{children:[Object(z.jsx)("hr",{style:{width:"100%",margin:"10px auto"}}),Object(z.jsx)(A,{timezone:r,dt:t.dt})]})]},t.dt)}))})]})}var q=n(160);function Z(t){var e=t.unit,n=t.updateUnit;return Object(z.jsxs)("span",{style:{float:"left",color:"white"},children:["\xb0F",Object(z.jsx)(q.a,{checked:"metric"===e,onChange:function(t,e){return n(e?"metric":"imperial")},name:"unit"}),"\xb0C"]})}var M=n(50),K=n(144),Q=n(145),V=Object(S.a)((function(t){return{root:{margin:"50px auto"},gridList:{borderTop:"solid 1px white",borderBottom:"solid 1px white",paddingLeft:"revert"},listItem:Object(M.a)({},t.breakpoints.down("xs"),{width:"100% !important"})}}));function X(t){var e=t.weather,n=t.timezone,r=t.unit,a=V();return Object(z.jsxs)("div",{className:a.root,children:[Object(z.jsx)(C.a,{variant:"overline",children:"Day Details"}),Object(z.jsx)(F.a,{className:a.gridList,children:Object.entries({sunrise:"time",sunset:"time",feels_like:"temp",humidity:"%",pressure:"hPa",wind_speed:"m/s",visibility:"m",uvi:"",dew_point:"temp",clouds:"%"}).map((function(t){var c=Object(l.a)(t,2),i=c[0],o=c[1],s="time"===o?Object(z.jsx)(U,{dt:e[i],timezone:n,variant:"h6"}):"temp"===o?Object(z.jsx)(D,{temperature:e[i],unit:r,variant:"h6"}):Object(z.jsxs)(C.a,{variant:"h6",children:[e[i]," ",o]});return Object(z.jsxs)(K.a,{className:a.listItem,style:{height:"auto"},children:[Object(z.jsx)(Q.a,{style:{textTransform:"uppercase"},children:i.replaceAll("_"," ")}),s]},i)}))})]})}var $=Object(r.forwardRef)((function(t,e){return Object(z.jsx)(O.a,Object(x.a)({ref:e},t))}));function tt(t){var e=t.open,n=t.onClose,r=t.onAdd,a=t.forecast,c=t.showAdd,i=t.unit,o=t.updateUnit,s=Object(S.a)({dialog:{minwidth:"400px",backgroundImage:a.background},dialogPaper:{minHeight:"90vh",maxHeight:"80vh"}})();return Object(z.jsx)(g.a,{open:e,onClose:n,fullWidth:!0,maxWidth:"lg",TransitionComponent:$,classes:{paper:s.dialogPaper},children:Object(z.jsx)(v.a,{className:s.dialog,children:Object(z.jsxs)(y.a,{container:!0,spacing:10,style:{height:"100%"},justify:"space-between",children:[Object(z.jsx)(y.a,{item:!0,children:Object(z.jsx)(Z,{unit:i,updateUnit:o})}),Object(z.jsx)(y.a,{item:!0,children:Object(z.jsxs)(w.a,{children:[c&&Object(z.jsx)(k.a,{onClick:r,color:"secondary",children:"Add"}),Object(z.jsx)(k.a,{onClick:n,color:"secondary",children:"Done"})]})}),Object(z.jsx)(P,{forecast:a,unit:i}),Object(z.jsx)(_,{forecast:a.hourly,unit:i,timezone:a.timezone}),Object(z.jsx)(Y,{forecast:a.daily,unit:i,timezone:a.timezone}),Object(z.jsx)(X,{weather:a.current,timezone:a.timezone,unit:i})]})})})}var et=n(151),nt=n(152),rt=n(153);function at(t){return ct.apply(this,arguments)}function ct(){return(ct=Object(u.a)(s.a.mark((function t(e){var n,r,a,c,i,o,u,d,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coordinates,r=n.latitude,a=n.longitude,console.log("Getting detailed forecast for ",r,a),i=(c=[r,a,"minutely,alerts","9cedb7db9ffa1eb9f46c7415dff1f316"])[1],o=c[2],u=c[3],d="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(c[0],"&lon=").concat(i,"&exclude=").concat(o,"&appid=").concat(u),t.next=6,fetch(d);case 6:return l=t.sent,t.t0=it,t.next=10,l.json();case 10:return t.t1=t.sent,t.t2=e,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function it(t,e){return Object.assign(t.current,T(t.current.temp)),t.background=function(t){var e=t.icon,n=t.main,r=t.description,a="d"===e[2]?"day":"night",c="",i="backgrounds/"+a+"/clear.jpg";return"rain"===(n=n.toLowerCase())||"snow"===n?c="backgrounds/".concat(n,".svg"):"fog"===n?c="backgrounds/fog.png":"thunderstorm"===n||"tornado"===n?c="backgrounds/".concat(n,".jpg"):"clouds"===n&&(c="scattered clouds"===r?"backgrounds/".concat(a,"/").concat(n,"/scattered.gif"):"backgrounds/".concat(a,"/").concat(n,"/").concat(r.split(" ")[0],".jpg")),(c?"url(".concat(c,"),"):"")+"url(".concat(i,")")}(t.current.weather[0]),t.city=e,t}var ot=Object(S.a)({card:{margin:"5px auto"},city:{width:"70%",textAlign:"left"},temperature:{margin:"5px"}});function st(t){var e=t.city,n=t.unit,a=t.onSelectForecast;console.log("Loaded city and unit");var c=Object(r.useState)(""),i=Object(l.a)(c,2),o=i[0],d=i[1];Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=d,t.next=3,at(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))()}),[e]);var j=ot();return Object(z.jsx)(z.Fragment,{children:o&&Object(z.jsx)(et.a,{className:j.card,color:"primary",style:{backgroundImage:o.background},children:Object(z.jsxs)(nt.a,{style:{display:"flex"},onClick:function(){return a(o)},children:[Object(z.jsx)(rt.a,{children:Object(z.jsx)(N,{weather:o.current.weather[0]})}),Object(z.jsxs)(rt.a,{className:j.city,children:[Object(z.jsx)(U,{timezone:o.timezone,variant:"caption"}),Object(z.jsx)(C.a,{variant:"h5",children:o.city.name})]}),Object(z.jsx)(rt.a,{className:j.temperature,children:Object(z.jsx)(D,{temperature:o.current[n]})})]})})})}var ut=n(154),dt=n(156),lt=n(157);function jt(){return(jt=Object(u.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new URL("https://spott.p.rapidapi.com/places/autocomplete")).search=new URLSearchParams({type:"CITY",q:e,limit:"10"}),t.next=4,ht(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(t){return bt.apply(this,arguments)}function bt(){return(bt=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.latitude,r=e.longitude,console.log("GETTING CITY",n,r),(a=new URL("https://spott.p.rapidapi.com/places")).search=new URLSearchParams({type:"CITY",latitude:n,longitude:r,limit:"1"}),t.next=6,ht(a);case 6:return t.abrupt("return",t.sent[0]);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ht(t){return mt.apply(this,arguments)}function mt(){return(mt=Object(u.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.toString(),{method:"GET",headers:{"x-rapidapi-key":"6cf7bdb303mshb189697c272b152p162809jsn28bdf60e152a","x-rapidapi-host":"spott.p.rapidapi.com"}});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ft(t){var e=t.open,n=t.onClose,a=t.onSelect,c=Object(r.useState)([]),i=Object(l.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(""),d=Object(l.a)(u,2),j=d[0],p=d[1],b=Object(r.useState)(!1),h=Object(l.a)(b,2),m=h[0],f=h[1];return Object(r.useEffect)((function(){!m&&j&&(f(!0),function(t){return jt.apply(this,arguments)}(j).then((function(t){console.log(t),f(!1),s(t)})))}),[j]),Object(z.jsx)(g.a,{open:e,onClose:function(){s([]),n()},maxWidth:"sm",fullWidth:!0,children:Object(z.jsxs)(v.a,{children:[Object(z.jsx)(ut.a,{variant:"subtitle2",children:"Enter City Name"}),Object(z.jsx)(lt.a,{options:o,getOptionLabel:function(t){return t&&t.name},onChange:function(t,e){a(e),n()},onInputChange:function(t){return p(t.target.value)},filterOptions:function(t,e){return t},renderInput:function(t){return Object(z.jsx)(dt.a,Object(x.a)(Object(x.a)({},t),{},{style:{width:"100%"},margin:"normal",InputProps:Object(x.a)(Object(x.a)({},t.InputProps),{},{type:"search"})}))}})]})})}n(95);var xt=Object(j.a)({palette:{type:"dark",primary:{main:"#084887"},secondary:{main:"#def0ff"}},spacing:2});var Ot=function(){var t=Object(r.useState)(localStorage.getItem("unit")||"metric"),e=Object(l.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(JSON.parse(localStorage.getItem("cities"))||[]),i=Object(l.a)(c,2),o=i[0],j=i[1],m=Object(r.useState)(!1),x=Object(l.a)(m,2),O=x[0],g=x[1],v=Object(r.useState)(!1),y=Object(l.a)(v,2),w=y[0],k=y[1],S=Object(r.useState)(!1),C=Object(l.a)(S,2),L=C[0],I=C[1],T=Object(r.useState)(""),N=Object(l.a)(T,2),W=N[0],U=N[1],A=Object(r.useState)(""),D=Object(l.a)(A,2),P=D[0],F=D[1],E=function(t){localStorage.setItem("unit",t),a(t)},R=function(t){console.log("updating city"),localStorage.setItem("cities",JSON.stringify([].concat(Object(d.a)(o),[t]))),j([].concat(Object(d.a)(o),[t]))};function B(t){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.forecast,r=e.city,n){t.next=6;break}return t.next=4,at(r);case 4:n=t.sent,I(!0);case 6:U(n),g(!0);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){return(J=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:F(e),k(!1),B({city:e});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return o.length||navigator.geolocation.getCurrentPosition(function(){var t=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coords,r=n.latitude,a=n.longitude,t.t0=R,t.next=4,pt({latitude:r,longitude:a});case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){return k(!0)})),Object(z.jsx)("div",{className:"App",children:Object(z.jsxs)(p.a,{theme:xt,children:[Object(z.jsx)(b.a,{maxWidth:"md",children:o.map((function(t){return Object(z.jsx)(st,{city:t,unit:n,onSelectForecast:function(t){return B({forecast:t})}},t.id)}))}),Object(z.jsxs)(b.a,{maxWidth:"md",children:[Object(z.jsx)(Z,{unit:n,updateUnit:E}),Object(z.jsx)(h.a,{color:"primary","aria-label":"Search City",style:{float:"right"},onClick:function(){return k(!0)},children:Object(z.jsx)(f.a,{})}),Object(z.jsx)(ft,{open:w,onClose:function(){return k(!1)},onSelect:function(t){return J.apply(this,arguments)}})]}),Object(z.jsx)(tt,{open:O,forecast:W,onClose:function(){return g(!1)},onAdd:function(){P&&o.indexOf((function(t){return t.id===P.id}))<0&&R(P),F(""),g(!1)},showAdd:L,unit:n,updateUnit:E})]})})};i.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(Ot,{})}),document.getElementById("root"))},88:function(t,e,n){},95:function(t,e,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.5f6547d9.chunk.js.map
(this.webpackJsonpmausam=this.webpackJsonpmausam||[]).push([[0],{87:function(t,e,n){},94:function(t,e,n){},99:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(12),i=n.n(c),o=(n(87),n(13)),s=n.n(o),u=n(18),l=n(61),d=n(16),j=n(73),p=n(154),b=n(137),h=n(142),m=n(72),f=n.n(m),O=n(33),x=n(145),g=n(158),v=n(147),y=n(138),w=n(148),k=n(149),S=n(139),C=n(100),I=function(t,e){return(e?new Date(1e3*e):new Date).toLocaleTimeString("en-US",{timeZone:t,hour:"2-digit",minute:"2-digit"})},z=function(t,e){return new Date(1e3*e).toLocaleDateString("en-US",{timeZone:t,weekday:"short",month:"short",day:"numeric"})};function L(t){return{metric:parseInt(t-276.15),imperial:parseInt(9*(t-276.15)/5+32)}}var T=n(3);function N(t){var e=t.weather,n=t.size;return Object(T.jsx)("img",{style:{margin:"auto"},src:"http://openweathermap.org/img/w/".concat(e.icon,".png"),alt:e.description,caption:e.description,width:n,height:n})}function U(t){var e=t.weather,n=t.variant,r=void 0===n?"subtitle1":n;return Object(T.jsx)(C.a,{component:"div",align:"center",variant:r,style:{textTransform:"capitalize"},children:e.description})}function A(t){var e=t.dt,n=t.timezone,r=t.variant,a=void 0===r?"body1":r;return Object(T.jsx)(C.a,{variant:a,children:I(n,e)})}function D(t){var e=t.dt,n=t.timezone;return Object(T.jsx)(C.a,{variant:"caption",children:z(n,e)})}function F(t){var e=t.temperature,n=t.unit,r=t.variant,a=void 0===r?"h3":r,c=n?L(e)[n]:e;return Object(T.jsxs)(C.a,{align:"center",variant:a,children:[c,"\xb0"]})}function W(t){var e,n,r,a=t.forecast,c=t.unit;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(b.a,{children:Object(T.jsxs)(C.a,{variant:"h6",align:"center",children:[null===(e=a.city)||void 0===e?void 0:e.name,",",Object(T.jsx)(C.a,{variant:"body1",component:"span",style:{paddingLeft:"5px"},children:null===(n=a.city)||void 0===n||null===(r=n.country)||void 0===r?void 0:r.id})]})}),Object(T.jsxs)(y.a,{container:!0,style:{background:"transparent",border:"none",margin:"auto"},justify:"space-evenly",spacing:2,children:[Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(F,{temperature:a.current[c],variant:"h2"})}),Object(T.jsx)(b.a,{children:Object(T.jsx)(U,{weather:a.current.weather[0]})})]})]})}var P=n(140),E=n(141),R=n(101),B={background:"transparent",border:"none",display:"flex",flexDirection:"column",textAlign:"center",padding:"10px 0"};function G(t){var e=t.weather,n=t.unit,r=t.type,a=t.children;return"daily"===r?Object.assign(e,L(e.temp.day)):Object.assign(e,L(e.temp)),Object(T.jsxs)(R.a,{variant:"outlined",square:!0,style:B,children:[Object(T.jsx)(N,{weather:e.weather[0]}),Object(T.jsx)(F,{temperature:e[n],variant:"h5"}),Object(T.jsx)(U,{weather:e.weather[0],variant:"caption"}),a]})}var J=Object(S.a)({root:{display:"flex",flexWrap:"wrap",marginTop:"50px",overflow:"hidden"},gridList:{flexWrap:"nowrap",borderTop:"solid 1px white",borderBottom:"solid 1px white"},gridListTile:{margin:"auto"}});function _(t){var e=t.forecast,n=t.unit,r=t.timezone,a=J();return Object(T.jsxs)("div",{className:a.root,children:[Object(T.jsx)(C.a,{variant:"overline",children:"Hourly Forecast"}),Object(T.jsx)(P.a,{cols:4,spacing:0,className:a.gridList,children:e.map((function(t,e){return Object(T.jsx)(E.a,{cols:.5,children:Object(T.jsx)(G,{weather:t,unit:n,children:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("hr",{style:{width:"100%",margin:"10px 0"}}),Object(T.jsx)(A,{timezone:r,dt:t.dt})]})})},e)}))})]})}var H=Object(S.a)({root:{marginTop:"50px",overflow:"hidden",width:"100%"},gridList:{flexWrap:"nowrap",borderTop:"solid 1px white",borderBottom:"solid 1px white",width:"100%"},gridListTile:{margin:"auto"}});function Y(t){var e=t.forecast,n=t.unit,r=t.timezone,a=H();return Object(T.jsxs)("div",{className:a.root,children:[Object(T.jsx)(C.a,{variant:"overline",children:"Daily Forecast"}),Object(T.jsx)(P.a,{cols:4,spacing:0,className:a.gridList,children:e.map((function(t){return Object(T.jsx)(E.a,{cols:.5,children:Object(T.jsx)(G,{weather:t,unit:n,type:"daily",children:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("hr",{style:{width:"100%",margin:"10px 0"}}),Object(T.jsx)(D,{timezone:r,dt:t.dt})]})})},t.dt)}))})]})}var q=n(159);function Z(t){var e=t.unit,n=t.updateUnit;return Object(T.jsxs)("span",{style:{float:"left",color:"white"},children:["\xb0F",Object(T.jsx)(q.a,{checked:"metric"===e,onChange:function(t,e){return n(e?"metric":"imperial")},name:"unit"}),"\xb0C"]})}var M=n(143),K=n(144),Q=Object(S.a)({root:{margin:"50px auto"},gridList:{borderTop:"solid 1px white",borderBottom:"solid 1px white",marginTop:"0"},listItem:{}});function V(t){var e=t.weather,n=t.timezone,r=t.unit,a=Q();return Object(T.jsxs)("div",{className:a.root,children:[Object(T.jsx)(C.a,{variant:"overline",children:"Day Details"}),Object(T.jsx)(P.a,{className:a.gridList,children:Object.entries({sunrise:"time",sunset:"time",feels_like:"temp",humidity:"%",pressure:"hPa",wind_speed:"m/s",visibility:"m",uvi:"",dew_point:"temp",clouds:"%"}).map((function(t){var c=Object(d.a)(t,2),i=c[0],o=c[1],s="time"===o?Object(T.jsx)(A,{dt:e[i],timezone:n,variant:"h6"}):"temp"===o?Object(T.jsx)(F,{temperature:e[i],unit:r,variant:"h6"}):Object(T.jsxs)(C.a,{variant:"h6",children:[e[i]," ",o]});return Object(T.jsxs)(M.a,{className:a.listItem,style:{height:"auto"},children:[Object(T.jsx)(K.a,{inset:!0,component:"div",style:{textTransform:"uppercase"},children:i.replaceAll("_"," ")}),Object(T.jsx)("div",{children:s})]},i)}))})]})}var X=Object(r.forwardRef)((function(t,e){return Object(T.jsx)(x.a,Object(O.a)({ref:e},t))}));function $(t){var e=t.open,n=t.onClose,r=t.onAdd,a=t.forecast,c=t.showAdd,i=t.unit,o=t.updateUnit,s=Object(S.a)({dialog:{backgroundImage:a.background},dialogPaper:{minHeight:"90vh",maxHeight:"80vh"}})();return Object(T.jsx)(g.a,{open:e,onClose:n,fullWidth:!0,maxWidth:"lg",TransitionComponent:X,classes:{paper:s.dialogPaper},children:Object(T.jsx)(v.a,{className:s.dialog,children:Object(T.jsxs)(y.a,{container:!0,spacing:10,style:{height:"100%"},justify:"space-between",children:[Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(Z,{unit:i,updateUnit:o})}),Object(T.jsx)(y.a,{item:!0,children:Object(T.jsxs)(w.a,{children:[c&&Object(T.jsx)(k.a,{onClick:r,color:"secondary",children:"Add"}),Object(T.jsx)(k.a,{onClick:n,color:"secondary",children:"Done"})]})}),Object(T.jsx)(W,{forecast:a,unit:i}),Object(T.jsx)(_,{forecast:a.hourly,unit:i,timezone:a.timezone}),Object(T.jsx)(Y,{forecast:a.daily,unit:i,timezone:a.timezone}),Object(T.jsx)(V,{weather:a.current,timezone:a.timezone,unit:i})]})})})}var tt=n(150),et=n(151),nt=n(152);function rt(t){return at.apply(this,arguments)}function at(){return(at=Object(u.a)(s.a.mark((function t(e){var n,r,a,c,i,o,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coordinates,r=n.latitude,a=n.longitude,console.log("Getting detailed forecast for ",r,a),i=(c=[r,a,"minutely,alerts","9cedb7db9ffa1eb9f46c7415dff1f316"])[1],o=c[2],u=c[3],l="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(c[0],"&lon=").concat(i,"&exclude=").concat(o,"&appid=").concat(u),t.next=6,fetch(l);case 6:return d=t.sent,t.t0=ct,t.next=10,d.json();case 10:return t.t1=t.sent,t.t2=e,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(t,e){return Object.assign(t.current,L(t.current.temp)),t.background=function(t){var e=t.icon,n=t.main,r=t.description,a="d"===e[2]?"day":"night",c="",i="backgrounds/"+a+"/clear.jpg";return"rain"===(n=n.toLowerCase())||"snow"===n?c="backgrounds/".concat(n,".svg"):"fog"===n?c="backgrounds/fog.png":"thunderstorm"===n||"tornado"===n?c="backgrounds/".concat(n,".jpg"):"clouds"===n&&(c="scattered clouds"===r?"backgrounds/".concat(a,"/").concat(n,"/scattered.gif"):"backgrounds/".concat(a,"/").concat(n,"/").concat(r.split(" ")[0],".jpg")),(c?"url(".concat(c,"),"):"")+"url(".concat(i,")")}(t.current.weather[0]),t.city=e,t}var it=Object(S.a)({card:{margin:"5px auto"},city:{width:"70%",textAlign:"left"},temperature:{margin:"5px"}});function ot(t){var e=t.city,n=t.unit,a=t.onSelectForecast;console.log("Loaded city and unit");var c=Object(r.useState)(""),i=Object(d.a)(c,2),o=i[0],l=i[1];Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l,t.next=3,rt(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))()}),[e]);var j=it();return Object(T.jsx)(T.Fragment,{children:o&&Object(T.jsx)(tt.a,{className:j.card,color:"primary",style:{backgroundImage:o.background},children:Object(T.jsxs)(et.a,{style:{display:"flex"},onClick:function(){return a(o)},children:[Object(T.jsx)(nt.a,{children:Object(T.jsx)(N,{weather:o.current.weather[0]})}),Object(T.jsxs)(nt.a,{className:j.city,children:[Object(T.jsx)(A,{timezone:o.timezone,variant:"caption"}),Object(T.jsx)(C.a,{variant:"h5",children:o.city.name})]}),Object(T.jsx)(nt.a,{className:j.temperature,children:Object(T.jsx)(F,{temperature:o.current[n]})})]})})})}var st=n(153),ut=n(155),lt=n(156);function dt(){return(dt=Object(u.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new URL("https://spott.p.rapidapi.com/places/autocomplete")).search=new URLSearchParams({type:"CITY",q:e,limit:"10"}),t.next=4,bt(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jt(t){return pt.apply(this,arguments)}function pt(){return(pt=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.latitude,r=e.longitude,console.log("GETTING CITY",n,r),(a=new URL("https://spott.p.rapidapi.com/places")).search=new URLSearchParams({type:"CITY",latitude:n,longitude:r,limit:"1"}),t.next=6,bt(a);case 6:return t.abrupt("return",t.sent[0]);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(t){return ht.apply(this,arguments)}function ht(){return(ht=Object(u.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.toString(),{method:"GET",headers:{"x-rapidapi-key":"6cf7bdb303mshb189697c272b152p162809jsn28bdf60e152a","x-rapidapi-host":"spott.p.rapidapi.com"}});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(t){var e=t.open,n=t.onClose,a=t.onSelect,c=Object(r.useState)([]),i=Object(d.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(""),l=Object(d.a)(u,2),j=l[0],p=l[1],b=Object(r.useState)(!1),h=Object(d.a)(b,2),m=h[0],f=h[1];return Object(r.useEffect)((function(){!m&&j&&(f(!0),function(t){return dt.apply(this,arguments)}(j).then((function(t){console.log(t),f(!1),s(t)})))}),[j]),Object(T.jsx)(g.a,{open:e,onClose:function(){s([]),n()},maxWidth:"sm",fullWidth:!0,children:Object(T.jsxs)(v.a,{children:[Object(T.jsx)(st.a,{variant:"subtitle2",children:"Enter City Name"}),Object(T.jsx)(lt.a,{options:o,getOptionLabel:function(t){return t&&t.name},onChange:function(t,e){a(e),n()},onInputChange:function(t){return p(t.target.value)},filterOptions:function(t,e){return t},renderInput:function(t){return Object(T.jsx)(ut.a,Object(O.a)(Object(O.a)({},t),{},{style:{width:"100%"},margin:"normal",InputProps:Object(O.a)(Object(O.a)({},t.InputProps),{},{type:"search"})}))}})]})})}n(94);var ft=Object(j.a)({palette:{type:"dark",primary:{main:"#084887"},secondary:{main:"#def0ff"}},spacing:2});var Ot=function(){var t=Object(r.useState)(localStorage.getItem("unit")||"metric"),e=Object(d.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(JSON.parse(localStorage.getItem("cities"))||[]),i=Object(d.a)(c,2),o=i[0],j=i[1],m=Object(r.useState)(!1),O=Object(d.a)(m,2),x=O[0],g=O[1],v=Object(r.useState)(!1),y=Object(d.a)(v,2),w=y[0],k=y[1],S=Object(r.useState)(!0),C=Object(d.a)(S,2),I=C[0],z=C[1],L=Object(r.useState)(""),N=Object(d.a)(L,2),U=N[0],A=N[1],D=Object(r.useState)(""),F=Object(d.a)(D,2),W=F[0],P=F[1],E=function(t){localStorage.setItem("unit",t),a(t)},R=function(t){console.log("updating city"),localStorage.setItem("cities",JSON.stringify([].concat(Object(l.a)(o),[t]))),j([].concat(Object(l.a)(o),[t]))};function B(t){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.forecast,r=e.city,!n){t.next=5;break}z(!1),t.next=8;break;case 5:return t.next=7,rt(r);case 7:n=t.sent;case 8:A(n),g(!0);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){return(J=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:P(e),k(!1),B({city:e});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return o.length||navigator.geolocation.getCurrentPosition(function(){var t=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coords,r=n.latitude,a=n.longitude,t.t0=R,t.next=4,jt({latitude:r,longitude:a});case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){return k(!0)})),Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)(p.a,{theme:ft,children:[Object(T.jsx)(b.a,{maxWidth:"md",children:o.map((function(t){return Object(T.jsx)(ot,{city:t,unit:n,onSelectForecast:function(t){return B({forecast:t})}},t.id)}))}),Object(T.jsxs)(b.a,{maxWidth:"md",children:[Object(T.jsx)(Z,{unit:n,updateUnit:E}),Object(T.jsx)(h.a,{color:"primary","aria-label":"Search City",style:{float:"right"},onClick:function(){return k(!0)},children:Object(T.jsx)(f.a,{})}),Object(T.jsx)(mt,{open:w,onClose:function(){return k(!1)},onSelect:function(t){return J.apply(this,arguments)}})]}),Object(T.jsx)($,{open:x,forecast:U,onClose:function(){return g(!1)},onAdd:function(){W&&o.indexOf((function(t){return t.id===W.id}))<0&&R(W),P(""),g(!1)},showAdd:I,unit:n,updateUnit:E})]})})};i.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(Ot,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.3f4f7359.chunk.js.map
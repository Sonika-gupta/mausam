(this.webpackJsonpmausam=this.webpackJsonpmausam||[]).push([[0],{86:function(t,e,n){},93:function(t,e,n){},98:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(12),i=n.n(c),o=(n(86),n(13)),s=n.n(o),u=n(18),l=n(59),d=n(16),j=n(72),p=n(151),b=n(136),h=n(141),f=n(71),m=n.n(f),O=n(33),x=n(142),g=n(155),v=n(144),y=n(137),w=n(145),k=n(146),S=n(138),C=n(99),I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=new Date(e);return new Intl.DateTimeFormat("en",{timeStyle:"short",timeZone:t}).format(n)},L=function(t,e){var n=new Date(e);return new Intl.DateTimeFormat("en",{weekday:"short",month:"short",day:"2-digit",timeZone:t}).format(n)};function T(t){return{metric:parseInt(t-276.15),imperial:parseInt(9*(t-276.15)/5+32)}}var z=n(3);function N(t){var e=t.weather,n=t.size;return Object(z.jsx)("img",{style:{margin:"auto"},src:"http://openweathermap.org/img/w/".concat(e.icon,".png"),alt:e.description,caption:e.description,width:n,height:n})}function F(t){var e=t.weather,n=t.variant,r=void 0===n?"subtitle1":n;return Object(z.jsx)(C.a,{component:"div",align:"center",variant:r,style:{textTransform:"capitalize"},children:e.description})}function W(t){var e=t.dt,n=t.timezone;return Object(z.jsx)(C.a,{variant:"body1",children:I(n,e)})}function A(t){var e=t.dt,n=t.timezone;return Object(z.jsx)(C.a,{variant:"caption",children:L(n,e)})}function D(t){var e=t.temperature,n=t.variant,r=void 0===n?"h3":n;return Object(z.jsxs)(C.a,{align:"center",variant:r,children:[e,"\xb0"]})}function P(t){var e,n,r,a=t.forecast,c=t.unit;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(b.a,{children:Object(z.jsxs)(C.a,{variant:"h6",align:"center",children:[null===(e=a.city)||void 0===e?void 0:e.name,",",Object(z.jsx)(C.a,{variant:"body1",component:"span",style:{paddingLeft:"5px"},children:null===(n=a.city)||void 0===n||null===(r=n.country)||void 0===r?void 0:r.id})]})}),Object(z.jsxs)(y.a,{container:!0,style:{background:"transparent",border:"none",margin:"auto"},justify:"space-evenly",spacing:2,children:[Object(z.jsx)(y.a,{item:!0,children:Object(z.jsx)(D,{temperature:a.current[c],variant:"h2"})}),Object(z.jsx)(b.a,{children:Object(z.jsx)(F,{weather:a.current.weather[0]})})]})]})}var U=n(139),E=n(140),R=n(100),J={background:"transparent",border:"none",display:"flex",flexDirection:"column",textAlign:"center",padding:"10px 0"};function G(t){var e=t.weather,n=t.unit,r=t.type,a=t.children;return"daily"===r?Object.assign(e,T(e.temp.day)):Object.assign(e,T(e.temp)),Object(z.jsxs)(R.a,{variant:"outlined",square:!0,style:J,children:[Object(z.jsx)(N,{weather:e.weather[0]}),Object(z.jsx)(D,{temperature:e[n],variant:"h5"}),Object(z.jsx)(F,{weather:e.weather[0],variant:"caption"}),a]})}var H=Object(S.a)({root:{display:"flex",flexWrap:"wrap",marginTop:"50px",overflow:"hidden"},gridList:{flexWrap:"nowrap",borderTop:"solid 1px white"},gridListTile:{margin:"auto"}});function Y(t){var e=t.forecast,n=t.unit,r=t.timezone,a=H();return Object(z.jsxs)("div",{className:a.root,children:[Object(z.jsx)(C.a,{variant:"overline",children:"Hourly Forecast"}),Object(z.jsx)(U.a,{cols:4,spacing:0,className:a.gridList,children:e.map((function(t,e){return Object(z.jsx)(E.a,{cols:.5,children:Object(z.jsx)(G,{weather:t,unit:n,children:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("hr",{style:{width:"100%",margin:"10px 0"}}),Object(z.jsx)(W,{timezone:r,dt:t.dt})]})})},e)}))})]})}var q=Object(S.a)({root:{margin:"50px auto",overflow:"hidden",width:"100%"},gridList:{flexWrap:"nowrap",borderTop:"solid 1px white",borderBottom:"solid 1px white",width:"100%"},gridListTile:{margin:"auto"}});function B(t){var e=t.forecast,n=t.unit,r=t.timezone,a=q();return Object(z.jsxs)("div",{className:a.root,children:[Object(z.jsx)(C.a,{variant:"overline",children:"Daily Forecast"}),Object(z.jsx)(U.a,{cols:4,spacing:0,className:a.gridList,children:e.map((function(t){return Object(z.jsx)(E.a,{cols:.5,children:Object(z.jsx)(G,{weather:t,unit:n,type:"daily",children:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("hr",{style:{width:"100%",margin:"10px 0"}}),Object(z.jsx)(A,{timezone:r,dt:t.dt})]})})},e.dt)}))})]})}var Z=n(156);function M(t){var e=t.unit,n=t.updateUnit;return Object(z.jsxs)("span",{style:{float:"left",color:"white"},children:["\xb0F",Object(z.jsx)(Z.a,{checked:"metric"===e,onChange:function(t,e){return n(e?"metric":"imperial")},name:"unit"}),"\xb0C"]})}var K=Object(r.forwardRef)((function(t,e){return Object(z.jsx)(x.a,Object(O.a)({ref:e},t))}));function Q(t){var e=t.open,n=t.onClose,a=t.onAdd,c=t.forecast,i=t.showAdd,o=Object(r.useState)(localStorage.getItem("unit")),s=Object(d.a)(o,2),u=s[0],l=s[1],j=Object(S.a)({dialog:{backgroundImage:c.background},dialogPaper:{minHeight:"90vh",maxHeight:"80vh"}})();return Object(z.jsx)(g.a,{open:e,onClose:n,fullWidth:!0,maxWidth:"lg",TransitionComponent:K,classes:{paper:j.dialogPaper},children:Object(z.jsx)(v.a,{className:j.dialog,children:Object(z.jsxs)(y.a,{container:!0,spacing:10,style:{height:"100%"},justify:"space-between",children:[Object(z.jsx)(y.a,{item:!0,children:Object(z.jsx)(M,{unit:u,updateUnit:function(t){return l(t)}})}),Object(z.jsx)(y.a,{item:!0,children:Object(z.jsxs)(w.a,{children:[i&&Object(z.jsx)(k.a,{onClick:a,color:"secondary",children:"Add"}),Object(z.jsx)(k.a,{onClick:n,color:"secondary",children:"Done"})]})}),Object(z.jsx)(P,{forecast:c,unit:u}),Object(z.jsx)(Y,{forecast:c.hourly,unit:u,timezone:c.timezone}),Object(z.jsx)(B,{forecast:c.daily,unit:u,timezone:c.timezone})]})})})}var V=n(147),X=n(148),$=n(149);function _(t){return tt.apply(this,arguments)}function tt(){return(tt=Object(u.a)(s.a.mark((function t(e){var n,r,a,c,i,o,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coordinates,r=n.latitude,a=n.longitude,console.log(r,a),i=(c=[r,a,"minutely,alerts","9cedb7db9ffa1eb9f46c7415dff1f316"])[1],o=c[2],u=c[3],l="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(c[0],"&lon=").concat(i,"&exclude=").concat(o,"&appid=").concat(u),t.next=6,fetch(l);case 6:return d=t.sent,t.t0=et,t.next=10,d.json();case 10:return t.t1=t.sent,t.t2=e,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t,e){return Object.assign(t.current,T(t.current.temp)),t.background=function(t){var e=t.icon,n=t.main,r=t.description,a="d"===e[2]?"day":"night",c="",i="backgrounds/"+a+"/clear.jpg";return"rain"===(n=n.toLowerCase())||"snow"===n?c="backgrounds/".concat(n,".svg"):"fog"===n?c="backgrounds/fog.png":"thunderstorm"===n||"tornado"===n?c="backgrounds/".concat(n,".jpg"):"clouds"===n&&(c="scattered clouds"===r?"backgrounds/".concat(a,"/").concat(n,"/scattered.gif"):"backgrounds/".concat(a,"/").concat(n,"/").concat(r.split(" ")[0],".jpg")),(c?"url(".concat(c,"),"):"")+"url(".concat(i,")")}(t.current.weather[0]),t.city=e,t}var nt=Object(S.a)({card:{margin:"5px auto"},city:{width:"70%",textAlign:"left"},temperature:{margin:"5px"}});function rt(t){var e=t.city,n=t.unit,a=t.onSelectForecast;console.log("Loaded city and unit");var c=Object(r.useState)(""),i=Object(d.a)(c,2),o=i[0],l=i[1];Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l,t.next=3,_(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))()}),[e]),console.log("Loaded forecast");var j=nt();return Object(z.jsx)(z.Fragment,{children:o&&Object(z.jsx)(V.a,{className:j.card,color:"primary",style:{backgroundImage:o.background},children:Object(z.jsxs)(X.a,{style:{display:"flex"},onClick:function(){return a(o)},children:[Object(z.jsx)($.a,{children:Object(z.jsx)(N,{weather:o.current.weather[0]})}),Object(z.jsxs)($.a,{className:j.city,children:[Object(z.jsx)(W,{timezone:o.timezone,variant:"caption"}),Object(z.jsx)(C.a,{variant:"h5",children:o.city.name})]}),Object(z.jsx)($.a,{className:j.temperature,children:Object(z.jsx)(D,{temperature:o.current[n]})})]})})})}var at=n(150),ct=n(152),it=n(153);function ot(){return(ot=Object(u.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new URL("https://spott.p.rapidapi.com/places/autocomplete")).search=new URLSearchParams({type:"CITY",q:e,limit:"10"}),t.next=4,lt(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(t){return ut.apply(this,arguments)}function ut(){return(ut=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.latitude,r=e.longitude,console.log("GETTING CITY",n,r),(a=new URL("https://spott.p.rapidapi.com/places")).search=new URLSearchParams({type:"CITY",latitude:n,longitude:r,limit:"1"}),t.next=6,lt(a);case 6:return t.abrupt("return",t.sent[0]);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(t){return dt.apply(this,arguments)}function dt(){return(dt=Object(u.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.toString(),{method:"GET",headers:{"x-rapidapi-key":"6cf7bdb303mshb189697c272b152p162809jsn28bdf60e152a","x-rapidapi-host":"spott.p.rapidapi.com"}});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jt(t){var e=t.open,n=t.onClose,a=t.onSelect,c=Object(r.useState)([]),i=Object(d.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(""),l=Object(d.a)(u,2),j=l[0],p=l[1],b=Object(r.useState)(!1),h=Object(d.a)(b,2),f=h[0],m=h[1];return Object(r.useEffect)((function(){!f&&j&&(m(!0),function(t){return ot.apply(this,arguments)}(j).then((function(t){console.log(t),m(!1),s(t)})))}),[j]),Object(z.jsx)(g.a,{open:e,onClose:function(){s([]),n()},maxWidth:"sm",fullWidth:!0,children:Object(z.jsxs)(v.a,{children:[Object(z.jsx)(at.a,{variant:"subtitle2",children:"Enter City Name"}),Object(z.jsx)(it.a,{options:o,getOptionLabel:function(t){return t&&t.name},onChange:function(t,e){a(e),n()},onInputChange:function(t){return p(t.target.value)},filterOptions:function(t,e){return t},renderInput:function(t){return Object(z.jsx)(ct.a,Object(O.a)(Object(O.a)({},t),{},{style:{width:"100%"},margin:"normal",InputProps:Object(O.a)(Object(O.a)({},t.InputProps),{},{type:"search"})}))}})]})})}n(93);var pt=Object(j.a)({palette:{type:"dark",primary:{main:"#084887"},secondary:{main:"#def0ff"}},spacing:2});var bt=function(){var t=Object(r.useState)(localStorage.getItem("unit")||"metric"),e=Object(d.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(JSON.parse(localStorage.getItem("cities"))||[]),i=Object(d.a)(c,2),o=i[0],j=i[1],f=Object(r.useState)(!1),O=Object(d.a)(f,2),x=O[0],g=O[1],v=Object(r.useState)(!1),y=Object(d.a)(v,2),w=y[0],k=y[1],S=Object(r.useState)(!0),C=Object(d.a)(S,2),I=C[0],L=C[1],T=Object(r.useState)(""),N=Object(d.a)(T,2),F=N[0],W=N[1],A=Object(r.useState)(""),D=Object(d.a)(A,2),P=D[0],U=D[1],E=function(t){console.log("updating city"),localStorage.setItem("cities",JSON.stringify([].concat(Object(l.a)(o),[t]))),j([].concat(Object(l.a)(o),[t]))};function R(t){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.forecast,r=e.city,!n){t.next=5;break}L(!1),t.next=8;break;case 5:return t.next=7,_(r);case 7:n=t.sent;case 8:console.log(n,r),W(n),g(!0);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(){return(G=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U(e),k(!1),R({city:e});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return o.length||navigator.geolocation.getCurrentPosition(function(){var t=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coords,r=n.latitude,a=n.longitude,t.t0=E,t.next=4,st({latitude:r,longitude:a});case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){return k(!0)})),Object(z.jsx)("div",{className:"App",children:Object(z.jsxs)(p.a,{theme:pt,children:[Object(z.jsx)(b.a,{maxWidth:"md",children:o.map((function(t){return Object(z.jsx)(rt,{city:t,unit:n,onSelectForecast:function(t){return R({forecast:t})}},t.id)}))}),Object(z.jsxs)(b.a,{maxWidth:"md",children:[Object(z.jsx)(M,{unit:n,updateUnit:function(t){localStorage.setItem("unit",t),a(t)}}),Object(z.jsx)(h.a,{color:"primary","aria-label":"Search City",style:{float:"right"},onClick:function(){return k(!0)},children:Object(z.jsx)(m.a,{})}),Object(z.jsx)(jt,{open:w,onClose:function(){return k(!1)},onSelect:function(t){return G.apply(this,arguments)}})]}),Object(z.jsx)(Q,{open:x,forecast:F,onClose:function(){return g(!1)},onAdd:function(){P&&o.indexOf((function(t){return t.id===P.id}))<0&&E(P),U(""),g(!1)},showAdd:I})]})})};i.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(bt,{})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.60e940f1.chunk.js.map